<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xmlns:jtheque="http://www.jtheque.com/schema/jtheque"
       xsi:schemaLocation="
            http://www.springframework.org/schema/beans
            http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
            http://www.springframework.org/schema/util
            http://www.springframework.org/schema/util/spring-util-2.5.xsd
            http://www.jtheque.com/schema/jtheque
            http://www.jtheque.com/schema/jtheque/jtheque.xsd"
       default-lazy-init="true">

    <!-- All the managers -->

    <bean id="beansManager" class="org.jtheque.core.managers.beans.BeansManager"/>

    <bean id="collectionManager" class="org.jtheque.core.managers.collection.CollectionManager"/>

    <bean id="errorManager" class="org.jtheque.core.managers.error.ErrorManager"/>

    <bean id="eventManager" class="org.jtheque.core.managers.event.EventManager"/>

    <bean id="featureManager" class="org.jtheque.core.managers.feature.FeatureManager"/>

    <bean id="languageManager" class="org.jtheque.core.managers.language.LanguageManager"/>

    <bean id="loggingManager" class="org.jtheque.core.managers.log.LoggingManager"/>

    <bean id="messageManager" class="org.jtheque.core.managers.message.MessageManager"/>

    <bean id="moduleManager" class="org.jtheque.core.managers.module.ModuleManager"/>

    <bean id="moduleLoader" class="org.jtheque.core.managers.module.loaders.SystemModuleLoader"/>

    <bean id="patchManager" class="org.jtheque.core.managers.patch.PatchManager"/>

    <bean id="resourceManager" class="org.jtheque.core.managers.resource.ResourceManager"/>

    <bean id="stateManager" class="org.jtheque.core.managers.state.StateManager"/>

    <bean id="updateManager" class="org.jtheque.core.managers.update.UpdateManager">
        <property name="versionsLoader">
            <bean class="org.jtheque.core.managers.update.versions.VersionsLoader"/>
        </property>
    </bean>

    <bean id="viewManager" class="org.jtheque.core.managers.view.ViewManager">
        <property name="configPanels">
            <list>
                <jtheque:proxy id="configAppearanceView" type="org.jtheque.core.managers.view.impl.components.config.JPanelConfigAppearance"/>
                <jtheque:proxy id="configOthersView" type="org.jtheque.core.managers.view.impl.components.config.JPanelConfigOthers"/>
                <jtheque:proxy id="configNetworkView" type="org.jtheque.core.managers.view.impl.components.config.JPanelConfigNetwork"/>
            </list>
        </property>
        <property name="viewDelegate">
            <bean class="org.jtheque.core.managers.view.impl.SwingViewDelegate"/>
        </property>
        <property name="viewDefaults" ref="uiDefaults"/>
    </bean>

    <bean id="_undoRedoManager" class="org.jtheque.core.managers.undo.UndoRedoManager"/>

    <bean id="_cacheManager" class="org.jtheque.core.managers.cache.CacheManager"/>

    <bean id="_fileManager" class="org.jtheque.core.managers.file.FileManager">
        <property name="restorers">
            <list>
                <bean class="org.jtheque.core.managers.file.impl.XMLRestorer"/>
                <bean class="org.jtheque.core.managers.file.impl.JTDRestorer"/>
            </list>
        </property>
        <property name="backupers">
            <list>
                <bean class="org.jtheque.core.managers.file.impl.XMLBackuper"/>
                <bean class="org.jtheque.core.managers.file.impl.JTDBackuper"/>
            </list>
        </property>
    </bean>

    <bean id="_persistenceManager" class="org.jtheque.core.managers.persistence.PersistenceManager"/>

    <bean id="_propertiesManager" class="org.jtheque.core.managers.properties.PropertiesManager"/>

    <bean id="_schemaManager" class="org.jtheque.core.managers.schema.SchemaManager"/>

    <!-- Activables managers -->

    <jtheque:activable id="undoRedoManager"/>
    <jtheque:activable id="cacheManager"/>
    <jtheque:activable id="fileManager"/>
    <jtheque:activable id="persistenceManager"/>
    <jtheque:activable id="propertiesManager"/>
    <jtheque:activable id="schemaManager"/>

    <!-- The Managers class -->

    <bean id="managerContainer" class="org.jtheque.core.managers.ManagerContainer">
        <constructor-arg>
            <util:map key-type="java.lang.Class" map-class="java.util.LinkedHashMap">
                <entry value-ref="beansManager" key="org.jtheque.core.managers.beans.IBeansManager"/>
                <entry value-ref="cacheManager" key="org.jtheque.core.managers.cache.ICacheManager"/>
                <entry value-ref="errorManager" key="org.jtheque.core.managers.error.IErrorManager"/>
                <entry value-ref="eventManager" key="org.jtheque.core.managers.event.IEventManager"/>
                <entry value-ref="featureManager" key="org.jtheque.core.managers.feature.IFeatureManager"/>
                <entry value-ref="fileManager" key="org.jtheque.core.managers.file.IFileManager"/>
                <entry value-ref="languageManager" key="org.jtheque.core.managers.language.ILanguageManager"/>
                <entry value-ref="loggingManager" key="org.jtheque.core.managers.log.ILoggingManager"/>
                <entry value-ref="messageManager" key="org.jtheque.core.managers.message.IMessageManager"/>
                <entry value-ref="moduleManager" key="org.jtheque.core.managers.module.IModuleManager"/>
                <entry value-ref="patchManager" key="org.jtheque.core.managers.patch.IPatchManager"/>
                <entry value-ref="persistenceManager" key="org.jtheque.core.managers.persistence.IPersistenceManager"/>
                <entry value-ref="propertiesManager" key="org.jtheque.core.managers.properties.IPropertiesManager"/>
                <entry value-ref="resourceManager" key="org.jtheque.core.managers.resource.IResourceManager"/>
                <entry value-ref="schemaManager" key="org.jtheque.core.managers.schema.ISchemaManager"/>
                <entry value-ref="stateManager" key="org.jtheque.core.managers.state.IStateManager"/>
                <entry value-ref="undoRedoManager" key="org.jtheque.core.managers.undo.IUndoRedoManager"/>
                <entry value-ref="updateManager" key="org.jtheque.core.managers.update.IUpdateManager"/>
                <entry value-ref="viewManager" key="org.jtheque.core.managers.view.able.IViewManager"/>
                <entry value-ref="collectionManager" key="org.jtheque.core.managers.collection.ICollectionManager"/>
            </util:map>
        </constructor-arg>
    </bean>
</beans>